<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
    <style>
       * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f5f5;
    color: #333;
    direction: rtl;
}

/* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
.tabs {
    background: #2c3e50;
    padding: 1rem;
    display: flex;
    gap: 0.5rem;
}

.tab-button {
    background: transparent;
    color: white;
    border: 1px solid white;
    padding: 0.5rem 1rem;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s;
}

.tab-button.active {
    background: white;
    color: #2c3e50;
}

.tab-button:hover {
    background: #34495e;
}

.tab-content {
    display: none;
    padding: 2rem;
}

.tab-content.active {
    display: block;
}

/* ØªØµÙ…ÙŠÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
.login-container {
    max-width: 400px;
    margin: 2rem auto;
    background: white;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.login-container h2 {
    text-align: center;
    margin-bottom: 1.5rem;
    color: #2c3e50;
}

.login-container input {
    width: 100%;
    padding: 0.75rem;
    margin: 0.5rem 0;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 1rem;
}

.login-container button {
    width: 100%;
    background: #3498db;
    color: white;
    border: none;
    padding: 0.75rem;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1rem;
    margin-top: 1rem;
}

.login-container button:hover {
    background: #2980b9;
}

.login-container p {
    text-align: center;
    margin-top: 1rem;
}

.login-container a {
    color: #3498db;
    text-decoration: none;
}

.login-container a:hover {
    text-decoration: underline;
}

/* ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† */
.container {
    max-width: 1200px;
    margin: 0 auto;
}

header {
    background: #2c3e50;
    color: white;
    padding: 1rem 2rem;
    border-radius: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

button {
    background: #3498db;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s;
}

button:hover {
    background: #2980b9;
}

.add-product {
    background: white;
    padding: 1.5rem;
    border-radius: 10px;
    margin-bottom: 2rem;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.form {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr auto;
    gap: 1rem;
    margin-top: 1rem;
}

input {
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 1rem;
}

.products {
    background: white;
    padding: 1.5rem;
    border-radius: 10px;
    margin-bottom: 2rem;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.table-container {
    overflow-x: auto;
    margin-top: 1rem;
}

table {
    width: 100%;
    border-collapse: collapse;
    min-width: 600px;
}

th, td {
    padding: 1rem;
    text-align: right;
    border-bottom: 1px solid #ddd;
}

th {
    background: #f8f9fa;
    font-weight: bold;
}

.summary {
    background: white;
    padding: 1.5rem;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.stat-card {
    background: #ecf0f1;
    padding: 1.5rem;
    border-radius: 8px;
    text-align: center;
}

.stat-card h3 {
    color: #7f8c8d;
    margin-bottom: 0.5rem;
}

.stat-card p {
    font-size: 1.5rem;
    font-weight: bold;
    color: #2c3e50;
}

.btn-delete {
    background: #e74c3c;
    padding: 0.3rem 0.7rem;
    font-size: 0.9rem;
}

.btn-delete:hover {
    background: #c0392b;
}

@media (max-width: 768px) {
    .form {
        grid-template-columns: 1fr;
    }
    
    header {
        flex-direction: column;
        gap: 1rem;
    }
    
    .tabs {
        flex-direction: column;
    }
}
       /* Ø³ÙŠØ¶Ø§Ù CSS Ù‡Ù†Ø§ */
    </style>
</head>
<body>
    <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
    <div class="tabs">
        <button class="tab-button active" onclick="showTab('login')">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        <button class="tab-button" onclick="showTab('register')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
        <button class="tab-button" onclick="showTab('inventory')">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
    </div>

    <!-- ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="login" class="tab-content active">
        <div class="login-container">
            <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <form onsubmit="login(event)">
                <input type="email" id="loginEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                <input type="password" id="loginPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                <button type="submit">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            </form>
            <p>Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a href="#" onclick="showTab('register')">Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ø§Ù‹</a></p>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ -->
    <div id="register" class="tab-content">
        <div class="login-container">
            <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
            <form onsubmit="register(event)">
                <input type="text" id="registerName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
                <input type="email" id="registerEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                <input type="password" id="registerPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                <input type="password" id="registerConfirm" placeholder="ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                <button type="submit">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
            </form>
            <p>Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ <a href="#" onclick="showTab('login')">Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></p>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
    <div id="inventory" class="tab-content">
        <div class="container">
            <header>
                <h1>ğŸª Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h1>
                <div class="user-info">
                    <span id="userName">Ù…Ø±Ø­Ø¨Ø§Ù‹!</span>
                    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
                </div>
            </header>

            <!-- Ø¨Ø§Ù‚ÙŠ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
            <section class="add-product">
                <h2>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>
                <div class="form">
                    <input type="text" id="pName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
                    <input type="number" id="pOldPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…">
                    <input type="number" id="pNewPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯">
                    <input type="number" id="pQuantity" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
                    <button onclick="addProduct()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
                </div>
            </section>

            <section class="products">
                <h2>ğŸ“¦ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                                <th>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…</th>
                                <th>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯</th>
                                <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="productsTable">
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="summary">
                <h2>ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>
                <div class="stats">
                    <div class="stat-card">
                        <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
                        <p id="totalProducts">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©</h3>
                        <p id="totalValue">0 Ø¯.Ù…</p>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
      // ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† - Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙØ­Ø§Øª ÙÙŠ Ù…Ù„Ù ÙˆØ§Ø­Ø¯
class InventoryApp {
    constructor() {
        this.products = this.loadProducts();
        this.currentUser = this.loadCurrentUser();
        this.init();
    }

    init() {
        this.checkAuth();
        this.setupEventListeners();
    }

    // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    loadCurrentUser() {
        return JSON.parse(localStorage.getItem('currentUser')) || null;
    }

    saveCurrentUser(user) {
        localStorage.setItem('currentUser', JSON.stringify(user));
    }

    checkAuth() {
        if (this.currentUser) {
            this.showTab('inventory');
            this.displayUserInfo();
            this.renderProducts();
            this.updateSummary();
        } else {
            this.showTab('login');
        }
    }

    // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    showTab(tabName) {
        // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.remove('active');
        });
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        document.querySelectorAll('.tab-button').forEach(button => {
            button.classList.remove('active');
        });
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø¯Ø¯
        document.getElementById(tabName).classList.add('active');
        
        // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯
        document.querySelector(`[onclick="showTab('${tabName}')"]`).classList.add('active');
    }

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    login(event) {
        event.preventDefault();
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;

        // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­Ù‚Ù‚ (ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
        const users = JSON.parse(localStorage.getItem('users')) || [];
        const user = users.find(u => u.email === email && u.password === btoa(password));

        if (user) {
            this.currentUser = user;
            this.saveCurrentUser(user);
            this.displayUserInfo();
            this.showTab('inventory');
            this.renderProducts();
            this.updateSummary();
            alert('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!');
        } else {
            alert('âŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
        }
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
    register(event) {
        event.preventDefault();
        const name = document.getElementById('registerName').value;
        const email = document.getElementById('registerEmail').value;
        const password = document.getElementById('registerPassword').value;
        const confirmPassword = document.getElementById('registerConfirm').value;

        if (password !== confirmPassword) {
            alert('âŒ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©');
            return;
        }

        const users = JSON.parse(localStorage.getItem('users')) || [];
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†ÙØ³ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
        if (users.find(u => u.email === email)) {
            alert('âŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹');
            return;
        }

        const newUser = {
            id: Date.now(),
            name,
            email,
            password: btoa(password)
        };

        users.push(newUser);
        localStorage.setItem('users', JSON.stringify(users));
        
        this.currentUser = newUser;
        this.saveCurrentUser(newUser);
        this.displayUserInfo();
        this.showTab('inventory');
        
        alert('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!');
    }

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
    logout() {
        if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
            this.currentUser = null;
            localStorage.removeItem('currentUser');
            this.showTab('login');
            alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
        }
    }

    displayUserInfo() {
        const userNameElement = document.getElementById('userName');
        if (userNameElement && this.currentUser) {
            userNameElement.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${this.currentUser.name}`;
        }
    }

    // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    loadProducts() {
        const userProducts = this.currentUser ? 
            JSON.parse(localStorage.getItem(`products_${this.currentUser.id}`)) : [];
        return userProducts || [];
    }

    saveProducts() {
        if (this.currentUser) {
            localStorage.setItem(`products_${this.currentUser.id}`, JSON.stringify(this.products));
        }
    }

    setupEventListeners() {
        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
        const productNameInput = document.getElementById('pName');
        if (productNameInput) {
            productNameInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') this.addProduct();
            });
        }
    }

    addProduct() {
        if (!this.currentUser) {
            alert('âŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
            this.showTab('login');
            return;
        }

        const name = document.getElementById('pName').value.trim();
        const oldPrice = parseFloat(document.getElementById('pOldPrice').value);
        const newPrice = parseFloat(document.getElementById('pNewPrice').value);
        const quantity = parseInt(document.getElementById('pQuantity').value);

        if (!name || isNaN(oldPrice) || isNaN(newPrice) || isNaN(quantity)) {
            alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
            return;
        }

        const product = {
            id: Date.now(),
            name,
            oldPrice,
            newPrice,
            quantity
        };

        this.products.push(product);
        this.saveProducts();
        this.renderProducts();
        this.updateSummary();
        this.clearForm();
        
        alert('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!');
    }

    clearForm() {
        document.getElementById('pName').value = '';
        document.getElementById('pOldPrice').value = '';
        document.getElementById('pNewPrice').value = '';
        document.getElementById('pQuantity').value = '';
        document.getElementById('pName').focus();
    }

    renderProducts() {
        const tbody = document.getElementById('productsTable');
        if (!tbody) return;

        tbody.innerHTML = '';

        this.products.forEach(product => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${product.name}</td>
                <td>${product.oldPrice.toFixed(2)} Ø¯.Ù…</td>
                <td>${product.newPrice.toFixed(2)} Ø¯.Ù…</td>
                <td>${product.quantity}</td>
                <td>
                    <button class="btn-delete" onclick="app.deleteProduct(${product.id})">
                        ğŸ—‘ï¸ Ø­Ø°Ù
                    </button>
                </td>
            `;
            tbody.appendChild(row);
        });
    }

    deleteProduct(id) {
        if (confirm('âŒ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) {
            this.products = this.products.filter(p => p.id !== id);
            this.saveProducts();
            this.renderProducts();
            this.updateSummary();
        }
    }

    updateSummary() {
        const totalProducts = this.products.reduce((sum, p) => sum + p.quantity, 0);
        const totalValue = this.products.reduce((sum, p) => sum + (p.newPrice * p.quantity), 0);

        const totalProductsElement = document.getElementById('totalProducts');
        const totalValueElement = document.getElementById('totalValue');

        if (totalProductsElement) {
            totalProductsElement.textContent = totalProducts;
        }
        if (totalValueElement) {
            totalValueElement.textContent = `${totalValue.toFixed(2)} dz`;
        }
    }
}

// Ø¥Ù†Ø´Ø§Ø¡ instance Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
const app = new InventoryApp();

// Ø¬Ø¹Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…ØªØ§Ø­Ø© globally
window.showTab = (tabName) => app.showTab(tabName);
window.login = (event) => app.login(event);
window.register = (event) => app.register(event);
window.logout = () => app.logout();
window.addProduct = () => app.addProduct();
window.app = app;
      // Ø³ÙŠØ¶Ø§Ù JavaScript Ù‡Ù†Ø§
    </script>
</body>
</html>